<div class="space-y-6 animate-in fade-in duration-500">
  <header class="flex justify-between items-end">
    <div>
      <h2 class="text-2xl font-bold text-white mb-2">Historial d'Escanejos</h2>
      <p class="text-slate-400">
        Registre complet de totes les auditories de seguretat realitzades.
      </p>
    </div>
    <div class="flex gap-2">
      <button
        class="px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-sm text-slate-300 hover:text-white hover:border-slate-600 transition-colors"
      >
        Exportar CSV
      </button>
    </div>
  </header>

  <div class="bg-slate-900 border border-slate-800 rounded-xl overflow-hidden">
    <table class="w-full text-left text-sm">
      <thead class="bg-slate-950 text-slate-500 uppercase text-xs border-b border-slate-800">
        <tr>
          <th class="px-6 py-4">Estat</th>
                          <th class="px-6 py-4 font-medium">Tipus Escaneig</th>
          <th class="px-6 py-4">Objectiu</th>
          <th class="px-6 py-4">Data</th>
          <th class="px-6 py-4">Vulnerabilitats</th>
          <th class="px-6 py-4">Durada</th>
          <th class="px-6 py-4 text-right">Accions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-800">
        <!-- SCAN HISTORY ACCEDIT COM A SIGNAL -->
        @for (scan of scanHistory(); track scan.id) {
        <tr class="hover:bg-slate-800/50 group transition-colors">
          <td class="px-6 py-4">
            <!-- ÚS DE FUNCIÓ EN LLOC DE NGCLASS -->
            <span
              class="px-3 py-1 rounded-md text-xs font-bold uppercase tracking-wide"
              [class]="getHistoryStatusClass(scan.state)"
            >
              {{ scan.state }}
            </span>
          </td>
          <td class="px-6 py-4">
            <div class="font-medium text-white font-mono">{{ scan.target }}</div>
          </td>
                    <td class="px-6 py-4 text-slate-400">{{ scan.ScanType }}</td>
          <td class="px-6 py-4 text-slate-400">{{ scan.date }}</td>
          <td class="px-6 py-4">
            @if (scan.vulnerabilityCount > 0) {
            <span class="text-red-400 font-medium">{{ scan.vulnerabilityCount }} detectades</span>
            } @else {
            <span class="text-slate-500">Cap incidència</span>
            }
          </td>
          <td class="px-6 py-4 text-slate-500 font-mono text-xs">{{ scan.duration }}</td>
          <td class="px-6 py-4 text-right">
            <button
              class="text-xs bg-slate-800 hover:bg-slate-700 text-emerald-400 hover:text-emerald-300 px-3 py-1.5 rounded border border-slate-700 transition-colors"
            >
              Veure Informe
            </button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>
